<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MKTG 430 - A/B Test Voting</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
      background: linear-gradient(135deg, #fff5f0 0%, #ffe8df 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      padding: 30px;
      margin-bottom: 20px;
    }

    h1 {
      color: #f76902;
      margin-bottom: 10px;
    }

    .progress-bar {
      background: #e0e0e0;
      height: 8px;
      border-radius: 4px;
      overflow: hidden;
      margin: 20px 0;
    }

    .progress-fill {
      background: #f76902;
      height: 100%;
      transition: width 0.3s;
    }

    .test-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }

    .variant {
      border: 3px solid transparent;
      border-radius: 8px;
      padding: 20px;
      background: #f9f9f9;
      transition: all 0.3s;
    }

    .variant.selected {
      border-color: #f76902;
      background: #fff5f0;
    }

    .variant h3 {
      margin-bottom: 15px;
      padding: 10px;
      border-radius: 4px;
    }

    .variant-a h3 {
      background: #f76902;
      color: white;
    }

    .variant-b h3 {
      background: #555;
      color: white;
    }

    .variant img {
      width: 100%;
      height: 250px;
      object-fit: cover;
      border-radius: 8px;
      margin-bottom: 15px;
    }

    .variant p {
      font-size: 16px;
      line-height: 1.5;
      color: #333;
      margin-bottom: 15px;
    }

    .slider-container {
      margin-top: 15px;
      padding: 15px;
      background: white;
      border-radius: 8px;
    }

    .slider-label {
      font-weight: bold;
      margin-bottom: 10px;
      display: block;
      font-size: 14px;
    }

    input[type="range"] {
      width: 100%;
      margin: 10px 0;
    }

    .slider-value {
      text-align: center;
      font-size: 24px;
      font-weight: bold;
      color: #f76902;
      margin: 10px 0;
    }

    .slider-labels {
      display: flex;
      justify-content: space-between;
      font-size: 12px;
      color: #666;
    }

    .vote-buttons {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 15px;
      margin: 20px 0;
    }

    button {
      padding: 15px 30px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
    }

    .btn-variant {
      background: #e0e0e0;
      color: #333;
    }

    .btn-variant:hover {
      background: #d0d0d0;
    }

    .btn-variant.selected {
      transform: scale(1.05);
    }

    .btn-variant-a.selected {
      background: #f76902;
      color: white;
    }

    .btn-variant-b.selected {
      background: #555;
      color: white;
    }

    .btn-primary {
      background: #22c55e;
      color: white;
      grid-column: 1 / -1;
    }

    .btn-primary:hover {
      background: #16a34a;
    }

    .btn-primary:disabled {
      background: #ccc;
      cursor: not-allowed;
    }

    .btn-secondary {
      background: #3b82f6;
      color: white;
    }

    .btn-secondary:hover {
      background: #2563eb;
    }

    textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-family: inherit;
      font-size: 14px;
      resize: vertical;
      margin-top: 10px;
    }

    textarea:focus {
      outline: none;
      border-color: #f76902;
    }

    .hidden {
      display: none;
    }

    .nav-buttons {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }

    .nav-buttons button {
      flex: 1;
    }

    input[type="text"] {
      width: 100%;
      padding: 15px;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      font-size: 16px;
      margin: 15px 0;
    }

    input[type="text"]:focus {
      outline: none;
      border-color: #f76902;
    }

    @media (max-width: 768px) {
      .test-grid {
        grid-template-columns: 1fr;
      }

      .vote-buttons {
        grid-template-columns: 1fr;
      }
    }

    .summary-item {
      padding: 15px;
      background: #f9f9f9;
      border-radius: 8px;
      margin-bottom: 10px;
    }

    .download-btn {
      background: #22c55e;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 20px;
      font-size: 18px;
    }

    .download-btn:hover {
      background: #16a34a;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Name Entry Screen -->
    <div id="nameScreen" class="card">
      <h1>Welcome to A/B Test Voting</h1>
      <p>Please enter your name to get started. Your responses will help analyze social media engagement patterns.</p>
      <input type="text" id="studentName" placeholder="Enter your name" />
      <button class="btn-primary" onclick="startVoting()">Start Voting</button>
    </div>

    <!-- Voting Screen -->
    <div id="votingScreen" class="hidden">
      <div class="card">
        <h1>A/B Test Voting</h1>
        <p id="testInfo">Test 1 of 18</p>
        <div class="progress-bar">
          <div class="progress-fill" id="progressBar"></div>
        </div>
      </div>

      <div class="test-grid" id="testGrid">
        <!-- Variants will be inserted here -->
      </div>

      <div class="card">
        <h3>Which variant would you engage with?</h3>
        <div class="vote-buttons">
          <button class="btn-variant btn-variant-a" onclick="selectVariant('A')">Vote for Variant A</button>
          <button class="btn-variant btn-variant-b" onclick="selectVariant('B')">Vote for Variant B</button>
        </div>

        <div id="commentSection" class="hidden">
          <label class="slider-label">Add a comment (optional)</label>
          <textarea id="commentText" rows="3" placeholder="Share your thoughts on this A/B test..."></textarea>
          <button class="btn-primary" onclick="submitVote()">Submit Vote</button>
        </div>
      </div>
    </div>

    <!-- Summary Screen -->
    <div id="summaryScreen" class="hidden">
      <div class="card">
        <h1>You're Done!</h1>
        <p>Thank you for completing all 18 A/B tests. Click the button below to download your data.</p>

        <button class="download-btn" onclick="downloadCSV()">
          <span>üì•</span>
          <span>Download My Data (CSV)</span>
        </button>

        <p style="margin-top: 20px; color: #666;">
          After downloading, submit the CSV file to the assignment dropbox on myCourses.
        </p>
      </div>
    </div>
  </div>

  <script>
    // A/B Test Data
    const abTests = [
      {
        team: "ImageTest - Memorial Art Gallery",
        testType: "Image",
        postA: {
          copy: "Come join the Memorial Art Gallery for our Paint and Play night! Bring your kids and their friends this Thursday for an evening of artistic exploration, community and inspiration. Don't miss out, this adventure will begin at 6:00 pm.",
          image: "images/memorial-art-a.jpg"
        },
        postB: {
          copy: "Come join the Memorial Art Gallery for our Paint and Play night! Bring your kids and their friends this Thursday for an evening of artistic exploration, community and inspiration. Don't miss out, this adventure will begin at 6:00 pm.",
          image: "images/memorial-art-b.jpg"
        }
      },
      {
        team: "CopyTest - Crocs",
        testType: "Copy",
        postA: {
          copy: "Embrace your inner ninja with our Naruto collection, available 10/22! #Naruto #Crocs",
          image: "images/crocs-naruto-a.jpg"
        },
        postB: {
          copy: "Twin with everyone's favorite alien on 10/22! Disney Stitch collection available now! üëΩ #Disney #Stitch #Crocs",
          image: "images/crocs-stitch-b.jpg"
        }
      },
      {
        team: "CopyTest - Duolingo",
        testType: "Copy",
        postA: {
          copy: "Nobody ignores me....for long",
          image: "images/duolingo-ignore-a.jpg"
        },
        postB: {
          copy: "I miss you, please come back!",
          image: "images/duolingo-miss-b.jpg"
        }
      },
      {
        team: "CopyTest - Tim Hortons",
        testType: "Copy/Audience",
        postA: {
          copy: "Whipped iced coffee - targeting Gen Z (currently trending)",
          image: "images/timhortons-iced-a.jpg"
        },
        postB: {
          copy: "Black mug with red logo - targeting Millennials+ (vintage, fun style)",
          image: "images/timhortons-mug-b.jpg"
        }
      },
      {
        team: "ImageTest - Spirit Airlines",
        testType: "Image",
        postA: {
          copy: "Fly Spirit With our Cheapest Prices Yet!",
          image: "images/spirit-a.jpg"
        },
        postB: {
          copy: "Fly Spirit With our Cheapest Prices Yet!",
          image: "images/spirit-b.jpg"
        }
      },
      {
        team: "ImageTest - Duolingo",
        testType: "Image",
        postA: {
          copy: "When Duolingo starts losing patience with you...",
          image: "images/duolingo-patience-a.jpg"
        },
        postB: {
          copy: "When Duolingo starts losing patience with you...",
          image: "images/duolingo-patience-b.jpg"
        }
      },
      {
        team: "ImageTest - Wegmans",
        testType: "Image",
        postA: {
          copy: "Buffalo Chicken Dip, your new game day MVP üî•üêî‚Å£ Whether you're hosting or just snacking, this dip never disappoints.",
          image: "images/wegmans-dip-a.jpg"
        },
        postB: {
          copy: "Buffalo Chicken Dip, your new game day MVP üî•üêî‚Å£ Whether you're hosting or just snacking, this dip never disappoints.",
          image: "images/wegmans-dip-b.jpg"
        }
      },
      {
        team: "CopyTest - Liquid Death",
        testType: "Copy",
        postA: {
          copy: "teenagers drinking liquid death",
          image: "images/liquiddeath-teens-a.jpg"
        },
        postB: {
          copy: "Pilot drinking liquid death with passengers",
          image: "images/liquiddeath-pilot-b.jpg"
        }
      },
      {
        team: "ImageTest - Denny's",
        testType: "Image",
        postA: {
          copy: "Pull up a chair. Stay a while. Whether you're here for the pancakes or the people, you know you're always welcome at our table.",
          image: "images/dennys-welcome-a.jpg"
        },
        postB: {
          copy: "Pull up a chair. Stay a while. Whether you're here for the pancakes or the people, you know you're always welcome at our table.",
          image: "images/dennys-welcome-b.jpg"
        }
      },
      {
        team: "CopyTest - Liquid Death",
        testType: "Copy",
        postA: {
          copy: "Even better than blood",
          image: "images/liquiddeath-blood-a.jpg"
        },
        postB: {
          copy: "The dead's go-to drink",
          image: "images/liquiddeath-dead-b.jpg"
        }
      },
      {
        team: "ImageTest - Liquid Death Skate",
        testType: "Image",
        postA: {
          copy: "Kickflips & cans üíÄüíß Hydrating the chaos with #LiquidDeath ‚Äî murder your thirst, not your vibe. üõπüî•",
          image: "images/liquiddeath-skate-a.jpg"
        },
        postB: {
          copy: "Kickflips & cans üíÄüíß Hydrating the chaos with #LiquidDeath ‚Äî murder your thirst, not your vibe. üõπüî•",
          image: "images/liquiddeath-skate-b.jpg"
        }
      },
      {
        team: "ImageTest - Wegmans Fresh",
        testType: "Image",
        postA: {
          copy: "Fresh flavors, unforgettable moments‚ÄîWegmans brings the best to your table every day.",
          image: "images/wegmans-fresh-a.jpg"
        },
        postB: {
          copy: "Fresh flavors, unforgettable moments‚ÄîWegmans brings the best to your table every day.",
          image: "images/wegmans-fresh-b.jpg"
        }
      },
      {
        team: "CopyTest - Jimmy Johns",
        testType: "Copy",
        postA: {
          copy: "Its a big dill üòâü•í",
          image: "images/jimmyjohns-dill-a.jpg"
        },
        postB: {
          copy: "can't talk rn, surfing through flavor space on a #JimmyJohns sub üåä",
          image: "images/jimmyjohns-surf-b.jpg"
        }
      },
      {
        team: "ImageTest - Crocs",
        testType: "Image",
        postA: {
          copy: "There's nothing better than Crocs.",
          image: "images/crocs-better-a.jpg"
        },
        postB: {
          copy: "There's nothing better than Crocs.",
          image: "images/crocs-better-b.jpg"
        }
      },
      {
        team: "ImageTest - Arby's",
        testType: "Image",
        postA: {
          copy: "chicken nuggets are for kids, steak nuggets are for men. Try 'em now, thank us later",
          image: "images/arbys-nuggets-a.jpg"
        },
        postB: {
          copy: "chicken nuggets are for kids, steak nuggets are for men. Try 'em now, thank us later",
          image: "images/arbys-nuggets-b.jpg"
        }
      },
      {
        team: "ImageTest - Liquid Death Metal",
        testType: "Image",
        postA: {
          copy: "Most Metal Way to Stay Hydrated",
          image: "images/liquiddeath-metal-a.jpg"
        },
        postB: {
          copy: "Most Metal Way to Stay Hydrated",
          image: "images/liquiddeath-metal-b.jpg"
        }
      },
      {
        team: "CopyTest - Denny's Existential",
        testType: "Copy",
        postA: {
          copy: "decomposing but make it ‚ú®breakfast‚ú®",
          image: "images/dennys-decompose-a.jpg"
        },
        postB: {
          copy: "The world outside crumbles. Inside, the pancakes whisper, 'You're safe here.'",
          image: "images/dennys-crumble-b.jpg"
        }
      },
      {
        team: "ImageTest - Wegmans Ascend",
        testType: "Image",
        postA: {
          copy: "Fresh. Local. Legendary. ‚ú® You don't just shop at Wegmans. You ascend to better food and brighter meals.",
          image: "images/wegmans-ascend-a.jpg"
        },
        postB: {
          copy: "Fresh. Local. Legendary. ‚ú® You don't just shop at Wegmans. You ascend to better food and brighter meals.",
          image: "images/wegmans-ascend-b.jpg"
        }
      }
    ];

    // State
    let studentName = '';
    let currentTest = 0;
    let selectedVariant = null;
    let responses = [];

    function startVoting() {
      const nameInput = document.getElementById('studentName');
      studentName = nameInput.value.trim();

      if (!studentName) {
        alert('Please enter your name');
        return;
      }

      document.getElementById('nameScreen').classList.add('hidden');
      document.getElementById('votingScreen').classList.remove('hidden');

      loadTest();
    }

    function loadTest() {
      const test = abTests[currentTest];

      // Update progress
      document.getElementById('testInfo').textContent = `Test ${currentTest + 1} of ${abTests.length} - ${test.team} (${test.testType})`;
      document.getElementById('progressBar').style.width = `${((currentTest + 1) / abTests.length) * 100}%`;

      // Build test grid
      const grid = document.getElementById('testGrid');
      grid.innerHTML = `
        <div class="variant variant-a" id="variantA">
          <h3>Variant A</h3>
          <img src="${test.postA.image}" alt="Variant A">
          <p>${test.postA.copy}</p>
          <div class="slider-container">
            <label class="slider-label">How likely to click? (1-5)</label>
            <div class="slider-value" id="sliderValueA">3</div>
            <input type="range" id="sliderA" min="1" max="5" value="3" oninput="updateSlider('A', this.value)">
            <div class="slider-labels">
              <span>Not likely</span>
              <span>Very likely</span>
            </div>
          </div>
        </div>

        <div class="variant variant-b" id="variantB">
          <h3>Variant B</h3>
          <img src="${test.postB.image}" alt="Variant B">
          <p>${test.postB.copy}</p>
          <div class="slider-container">
            <label class="slider-label">How likely to click? (1-5)</label>
            <div class="slider-value" id="sliderValueB">3</div>
            <input type="range" id="sliderB" min="1" max="5" value="3" oninput="updateSlider('B', this.value)">
            <div class="slider-labels">
              <span>Not likely</span>
              <span>Very likely</span>
            </div>
          </div>
        </div>
      `;

      // Reset selection
      selectedVariant = null;
      document.getElementById('commentSection').classList.add('hidden');
      document.getElementById('commentText').value = '';

      // Reset button states
      document.querySelectorAll('.btn-variant').forEach(btn => {
        btn.classList.remove('selected');
      });
    }

    function updateSlider(variant, value) {
      document.getElementById('sliderValue' + variant).textContent = value;
    }

    function selectVariant(variant) {
      selectedVariant = variant;

      // Update button states
      document.querySelectorAll('.btn-variant').forEach(btn => {
        btn.classList.remove('selected');
      });
      event.target.classList.add('selected');

      // Update variant cards
      document.getElementById('variantA').classList.toggle('selected', variant === 'A');
      document.getElementById('variantB').classList.toggle('selected', variant === 'B');

      // Show comment section
      document.getElementById('commentSection').classList.remove('hidden');
    }

    function submitVote() {
      if (!selectedVariant) {
        alert('Please select a variant');
        return;
      }

      const test = abTests[currentTest];
      const response = {
        studentName: studentName,
        testName: test.team,
        testType: test.testType,
        variantSelected: `Variant ${selectedVariant}`,
        variantAClickLikelihood: document.getElementById('sliderA').value,
        variantBClickLikelihood: document.getElementById('sliderB').value,
        comment: document.getElementById('commentText').value,
        timestamp: new Date().toISOString()
      };

      responses.push(response);

      // Move to next test or summary
      if (currentTest < abTests.length - 1) {
        currentTest++;
        loadTest();
        window.scrollTo(0, 0);
      } else {
        showSummary();
      }
    }

    function showSummary() {
      document.getElementById('votingScreen').classList.add('hidden');
      document.getElementById('summaryScreen').classList.remove('hidden');
    }

    function downloadCSV() {
      // Create CSV content
      const headers = ['Student Name', 'Test Name', 'Test Type', 'Variant Selected', 'Variant A Click Likelihood', 'Variant B Click Likelihood', 'Comment', 'Timestamp'];
      const csvRows = [headers.join(',')];

      responses.forEach(r => {
        const row = [
          r.studentName,
          `"${r.testName}"`,
          r.testType,
          r.variantSelected,
          r.variantAClickLikelihood,
          r.variantBClickLikelihood,
          `"${r.comment.replace(/"/g, '""')}"`,
          r.timestamp
        ];
        csvRows.push(row.join(','));
      });

      const csvContent = csvRows.join('\n');
      const blob = new Blob([csvContent], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `ABTest_${studentName}_${new Date().toISOString().split('T')[0]}.csv`;
      link.click();
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>
